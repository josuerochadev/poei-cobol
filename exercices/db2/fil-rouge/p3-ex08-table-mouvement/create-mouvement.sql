-- P3 EXERCICE 8 : Creation table MOUVEMENT

-- DROP TABLE MOUVEMENT;

CREATE TABLE MOUVEMENT (
    NUM_COMPTE   CHAR(3) REFERENCES CLIENT(NUM_COMPTE),
    LIB_MOUV     VARCHAR(15),
    MONTANT_MVT  DECIMAL(8,2),
    SENS         CHAR(2),
    NATURE       CHAR(3),
    DATE_MVT     DATE,
    CHECK(SENS IN ('DB','CR')),
    CHECK(NATURE IN ('CHQ','VER','VIR'))
);

-- Donnees de test
INSERT INTO MOUVEMENT VALUES ('001','VIREMENT SAL',1500.00,'CR','VIR',DATE('2024-01-15'));
INSERT INTO MOUVEMENT VALUES ('001','CHEQUE 001',200.00,'DB','CHQ',DATE('2024-01-20'));
INSERT INTO MOUVEMENT VALUES ('001','VERSEMENT',500.00,'CR','VER',DATE('2024-02-01'));
INSERT INTO MOUVEMENT VALUES ('002','VIREMENT',800.00,'CR','VIR',DATE('2024-01-10'));
INSERT INTO MOUVEMENT VALUES ('002','CHEQUE 002',1000.00,'DB','CHQ',DATE('2024-01-25'));
INSERT INTO MOUVEMENT VALUES ('003','VERSEMENT ESP',300.00,'CR','VER',DATE('2024-02-05'));
INSERT INTO MOUVEMENT VALUES ('003','VIREMENT',450.00,'CR','VIR',DATE('2024-02-10'));
INSERT INTO MOUVEMENT VALUES ('005','CHEQUE 005',150.00,'DB','CHQ',DATE('2024-01-18'));
INSERT INTO MOUVEMENT VALUES ('005','VIREMENT SAL',2500.00,'CR','VIR',DATE('2024-01-31'));
INSERT INTO MOUVEMENT VALUES ('010','VERSEMENT',1000.00,'CR','VER',DATE('2024-02-15'));
INSERT INTO MOUVEMENT VALUES ('012','CHEQUE 012',350.00,'DB','CHQ',DATE('2024-01-22'));
INSERT INTO MOUVEMENT VALUES ('012','VIREMENT',200.00,'CR','VIR',DATE('2024-02-20'));

-- Verification
SELECT * FROM MOUVEMENT ORDER BY NUM_COMPTE, DATE_MVT;
